## M4 – Interactive Voice System

What to Build:

- Create /api/voice endpoint that returns TwiML:
  - Greeting with reminder title
  - <Gather> element accepting speech and DTMF input
  - Prompt: "Say confirm or press 1 to acknowledge, say snooze or press 2 to reschedule"
- Create /api/gather endpoint to process user input:
  - "confirm" or digit "1" → update reminder status to DONE
  - "snooze"/"call me in an hour" or digit "2" → set next_attempt_at to +60 minutes
  - Unknown input → log in call_logs but don't change reminder
- Create /api/call-status endpoint for Twilio callbacks:
  - "completed" → check if confirmed via gather, update accordingly
  - "no-answer"/"busy" → increment attempts, schedule retry or escalate
  - "failed" → log error, handle as failed attempt
- Update call_logs with outcomes and transcripts

Testing Checklist:

### Voice Endpoints

- GET /api/voice returns valid TwiML XML with <Gather>
- POST /api/gather with "confirm" → reminder status DONE
- POST /api/gather with "snooze" → next_attempt_at updated +60min
- Unknown gather input logged but status unchanged

### Call Status Handling

- "no-answer" outcome increments attempts and schedules retry
- After 3 failures → status changes to ESCALATED
- All call outcomes logged in call_logs table
- Transcript and intent captured when available
- Try several inputs and confirm results.
